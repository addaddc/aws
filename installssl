1.
After install the tomcat, it will be 8080.
Using the following to access tomcat by port 80
sudo /sbin/iptables -t nat -I PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 8080
sudo /sbin/iptables -t nat -I PREROUTING -p tcp --dport 80 -j REDIRECT --to-port 80


which amazon-linux-extras

if not installed,
sudo yum install -y amazon-linux-extras

install EPEL:
sudo amazon-linux-extras install epel
instalï¼šcertbot
sudo yum install certbot


sudo /sbin/iptables -t nat -I PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 8443

show all port forwarding:
sudo iptables -t nat -L -n -v


install certification:

sudo certbot certonly --standalone -d yourdomainname.com


chmod -R 755 /opt/tomcat
cd /opt/tomcat/conf
update server.xml and set the generated certificate folder path

 <Connector port="80" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="443"
               maxParameterCount="1000"
               />
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443"
               maxParameterCount="1000"
               />
    -->
	
<Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol"
               maxThreads="150" SSLEnabled="true">
        <SSLHostConfig>
          <Certificate certificateFile="/etc/letsencrypt/live/domainname.com/cert.pem"
                 certificateKeyFile="/etc/letsencrypt/live/domainname.com/privkey.pem"
                 certificateChainFile="/etc/letsencrypt/live/domainname.com/chain.pem" />
        </SSLHostConfig>
</Connector>




sudo /sbin/iptables -t nat -I PREROUTING -p tcp --dport 443 -j REDIRECT --to-port 8443


